const express = require("express")
const router = express.Router()

const db = require("../db")

router.post("/{{ .CollectionName }}", async (req, res) => {
    const { {{ .Columns }} } = req.body
    const { rows } = await db.query(
        "INSERT INTO {{ .CollectionName }} ({{ .Columns }}) VALUES ({{ .ColumnsPlaceHolders }}) RETURNING id",
        [ {{ .Columns }} ]
    )

    res.json({ message: "success", id: rows[0].id })
})

module.exports = router
